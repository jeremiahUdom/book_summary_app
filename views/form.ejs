<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/styles/main.css">
  <title><%= title %></title>
</head>
<body>
  <main class="form-page">
    <form 
      action="/<%= endpoint %><% if(summary) { %>/<%= summary.id%><% } %>" 
      method="post" class="form"
    >
      <h1 class="title"><%= title %></h1>
      <div class="form-group">
        <label for="title">Title</label>
        <input type="text" id="title" name="title" class="form-field" value="<%= summary.book_title || "" %>" required>
      </div>
      <div class="form-group">
        <label for="author">Author</label>
        <input type="text" id="author" name="author" class="form-field" value="<%= summary.book_author || "" %>" required>
      </div>
      <div class="form-group">
        <label for="isbn">ISBN</label>
        <input type="text" id="isbn" name="isbn" class="form-field" value="<%= summary.book_isbn || "" %>" required>
      </div>
      
      <% 
        let dateValue = '';
        if (summary.date_read) {
          const dateObj = new Date(summary.date_read);
          dateValue = dateObj.toISOString().split('T')[0]; // "2025-08-29"
        }
      %>
      <div class="form-group">
        <label for="dateread">Date Read</label>
        <input type="date" id="dateread" name="dateread" class="form-field" value="<%= dateValue || "" %>" required>
      </div>
      <div class="form-group">
        <label for="summary">Summary</label>
        <textarea id="summary" name="summary" rows="5" required><%= summary.summary || "" %></textarea>
      </div>
      <div class="form-group">
        <label for="rating">Rating (1-5)</label>
        <input type="number" id="rating" name="rating" min="1" max="5" class="form-field" value="<%= summary.rating || "" %>" required>
      </div>
      <button type="submit" class="custom-btn">Submit</button>
    </form>
  </main>
</body>
</html>